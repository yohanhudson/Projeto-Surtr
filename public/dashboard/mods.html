<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="mods.css">
    <script src="../js/funcoes.js"></script>
</head>
<link rel="shortcut icon" type="imagex/png" href="../assets/deenbeg-3775233d-3451-4574-985a-39fca6594936-_1_.ico" />

<body onload="validarSessao(), Listarcurtidas(), TotalCurtida()">
    <header>
        <p>SURTR</p>
        <nav>
            <ul>
                <li><a href="./index_logado.html">Inicio</a></li>
                <li><a href="./sobre_logado.html">Sobre</a></li>
                <li><a href="./builds_logado.html">Builds</a></li>
                <li><a href="./forun_logado.html">Fórum</a></li>
                <li><a class="now" href="mods.html">Mods</a></li>
                <li><a href="./logado.html">dashboard</a></li>
                <a href="">|</a>
                <div><span class="nome_usuario" id="b_usuario">seu nome</span></div>
                <li><a href="" onclick="sair()">Sair</a></li>
            </ul>
        </nav>
    </header>
    <div class="banner">
        <div class="container">
            <br>
            <br>
            <br>
            <div class="titulo">
                <h1>Melhores Mods de Elden Ring</h1>
            </div>
            <div class="div_global">
                <div class="containerMod1">
                    <div class="div_imagem">
                        <img src="../assets/mod1.png" alt="">
                    </div>
                    <div class="containerTexto">
                        <div class="tituloMod1">
                            <H1>New Game is Plus</H1>
                        </div>
                        <div class="textoMod1">
                            Esse mod criado por um streamer chamado ""Kingly", altera o jogo para que cada
                            dificuldade
                            seja
                            um passo à frente. Novo jogo é novo jogo + 1, NG+1 é NG+2, etc.
                            Isso se aplicará a todos os seus personagens, desde que o mod esteja instalado. Se for
                            substituído ou desinstalado, não será mais aplicado a nenhum caractere.<br><br>
                            <a href="https://www.nexusmods.com/eldenring/mods/578">Download</a>
                        </div>
                    </div>
                    <div class="containerImagem">
                        <div class="div_imagemLike">
                            <img id="imagem1" onclick="curti(1)" src="../assets/like.png" style="display: block;">
                            <img id="imagem2" onclick="descurtir(1)" src="../assets/deslike.png" style="display: none;">
                        </div>
                        <div class="quantidadeCurtidas">
                            <p id="qtdCurtidasMod1">0</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="div_global">
                <div class="containerMod2">
                    <div class="div_imagem">
                        <img src="../assets/mod2.jpeg" alt="">
                    </div>
                    <div class="containerTexto2">
                        <div class="tituloMod1">
                            <H1>Elden Ring Key Item Randomizer</H1>
                        </div>
                        <div class="textoMod1">
                            Esse mod criado por "fãn desconhecido da comunidade", modifica as localização dos itens
                            padrao do game, assim trazendo a sensação de um jogo novo para explorar novamente.<br><br>
                            <a href="https://www.nexusmods.com/eldenring/mods/428">Download</a>
                        </div>
                    </div>
                    <div class="containerImagem">
                        <div class="div_imagemLike">
                            <img id="imagem3" onclick="curti(2)" src="../assets/like.png" style="display: block;">
                            <img id="imagem4" onclick="descurtir(2)" src="../assets/deslike.png" style="display: none;">
                        </div>
                        <div class="quantidadeCurtidas">
                            <p id="qtdCurtidasMod2">0</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="div_global">
                <div class="containerMod3">
                    <div class="div_imagem">
                        <img src="../assets/mod3.jpeg" alt="">
                    </div>
                    <div class="containerTexto">
                        <div class="tituloMod1">
                            <H1>Invocação do Let me Solo Her</H1>
                        </div>
                        <div class="textoMod1">
                            Esse mod criado por "Garden of Eyes" inclui a invocação do Let me Solo Her, uma homenagem ao
                            lendario jogador que fica na porta da do boss Malenia e ajuda todo mundo a derrotá-la,
                            encarando
                            o desafio sozinho com as suas duas katanas e capacete no formato de pote - e mais nada. Se
                            tornou um herói!<br><br>
                            <a href="https://www.patreon.com/GardenOfEyes">Download</a>
                        </div>
                    </div>
                    <div class="containerImagem">
                        <div class="div_imagemLike">
                            <img id="imagem5" onclick="curti(3)" src="../assets/like.png" style="display: block;">
                            <img id="imagem6" onclick="descurtir(3)" src="../assets/deslike.png" style="display: none;">
                        </div>
                        <div class="quantidadeCurtidas">
                            <p id="qtdCurtidasMod3">0</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="div_global">
                <div class="containerMod4">
                    <div class="div_imagem">
                        <img src="../assets/mod4.jpg" alt="">
                    </div>
                    <div class="containerTexto2">
                        <div class="tituloMod1">
                            <H1>NPCs e chefes como invocação</H1>
                        </div>
                        <div class="textoMod1">
                            Esse mod criado por "fãn desconhecido" add um diferencial que traz alguns dos NPCs
                            (personagens
                            não jogáveis) do jogo como companheiros para lutarem ao seu lado. Sempre quis ter uma
                            Malenia de
                            estimação? Agora você pode ter a chefe opcional do seu lado ao invés de causar dor de cabeça
                            enfrentando-a.<br><br>
                            <a href="https://www.nexusmods.com/eldenring/mods/414">Download</a>
                        </div>
                    </div>
                    <div class="containerImagem">
                        <div class="div_imagemLike">
                            <img id="imagem7" onclick="curti(4)" src="../assets/like.png" style="display: block;">
                            <img id="imagem8" onclick="descurtir(4)" src="../assets/deslike.png" style="display: none;">
                        </div>
                        <div class="quantidadeCurtidas">
                            <p id="qtdCurtidasMod4">0</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="div_global">
                <div class="containerMod5">
                    <div class="div_imagem">
                        <img src="../assets/mod5.jpeg" alt="">
                    </div>
                    <div class="containerTexto">
                        <div class="tituloMod1">
                            <H1>Fire keeper to Ranni</H1>
                        </div>
                        <div class="textoMod1">
                            Esse mod criado por "fãn desconhecido" modifica o NPC Ranni e fazendo com que tenha
                            aparencia da
                            Fire keeper do Dark Souls 3, para realizar um sonho de muitos jogadores onde voce pode
                            se casar
                            com a NPC em questão.<br><br>
                            <a href="https://www.nexusmods.com/eldenring/mods/400">Download</a>
                        </div>
                    </div>
                    <div class="containerImagem">
                        <div class="div_imagemLike">
                            <img id="imagem9" onclick="curti(5)" src="../assets/like.png" style="display: block;">
                            <img id="imagem10" onclick="descurtir(5)" src="../assets/deslike.png"
                                style="display: none;">
                        </div>
                        <div class="quantidadeCurtidas">
                            <p id="qtdCurtidasMod5">0</p>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <br>
        </div>
    </div>
    </div>
</body>

</html>
<script>

    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;

    const idUser = sessionStorage.ID_USUARIO;

    let atualizar;

    window.onload = Listarcurtidas(idUser);

    function Listarcurtidas(idUser) {
        fetch(`http://localhost:3333/medidas/numerocurtida/${idUser}`)
            .then((response) => {
                response.json()
                    .then((resposta) => {
                        console.log(resposta.response);
                        if (resposta.response.length > 0) {
                            const curtida = resposta.response
                            console.log(curtida);

                            let mods = [];

                            for (let i = 0; i < curtida.length; i++) {

                                mods.push(curtida[i].fk_mods)

                            }

                            console.log(mods);

                            for (let i = 0; i < mods.length; i++) {
                                switch (mods[i]) {
                                    case 1: {
                                        imagem1.style.display = "none"
                                        imagem2.style.display = "block"
                                        break;
                                    }
                                    case 2: {
                                        imagem3.style.display = "none"
                                        imagem4.style.display = "block"
                                        break;
                                    }
                                    case 3: {
                                        imagem5.style.display = "none"
                                        imagem6.style.display = "block"
                                        break;
                                    }
                                    case 4: {
                                        imagem7.style.display = "none"
                                        imagem8.style.display = "block"
                                        break;
                                    }
                                    case 5: {
                                        imagem9.style.display = "none"
                                        imagem10.style.display = "block"
                                        break;
                                    }
                                }
                            }
                            TotalCurtida()
                        }
                    })
            });
    }



    function curti(idMod) {
        fetch(`http://localhost:3333/medidas/curtimod/${idUser}/${idMod}`)
            .then((response) => {
                response.json()
                    .then((resposta) => {
                        console.log(`curtido com sucesso o mod ${idMod}`);
                        console.log(resposta.response);
                        if (response.status == 200) {
                            switch (idMod) {
                                case 1: {
                                    imagem1.style.display = "none"
                                    imagem2.style.display = "block"
                                    break;
                                } case 2: {
                                    imagem3.style.display = "none"
                                    imagem4.style.display = "block"
                                    break;
                                } case 3: {
                                    imagem5.style.display = "none"
                                    imagem6.style.display = "block"
                                    break;
                                } case 4: {
                                    imagem7.style.display = "none"
                                    imagem8.style.display = "block"
                                    break;
                                }
                                case 5: {
                                    imagem9.style.display = "none"
                                    imagem10.style.display = "block"
                                    break;
                                }
                            }
                        }

                        TotalCurtida()

                    })
            });
    }

    function descurtir(idMod) {
        fetch(`http://localhost:3333/medidas/descurtimod/${idUser}/${idMod}`)
            .then((response) => {
                response.json()
                    .then((resposta) => {
                        console.log(`descurtido com sucesso o mod ${idMod}`);
                        console.log(resposta.response);
                        if (response.status == 200) {
                            switch (idMod) {
                                case 1: {
                                    imagem1.style.display = "block"
                                    imagem2.style.display = "none"
                                    break;
                                } case 2: {
                                    imagem3.style.display = "block"
                                    imagem4.style.display = "none"
                                    break;
                                } case 3: {
                                    imagem5.style.display = "block"
                                    imagem6.style.display = "none"
                                    break;
                                } case 4: {
                                    imagem7.style.display = "block"
                                    imagem8.style.display = "none"
                                    break;
                                } case 5: {
                                    imagem9.style.display = "block"
                                    imagem10.style.display = "none"
                                    break;
                                }
                            }
                        }

                        TotalCurtida()

                    })
            });
    }

    function TotalCurtida(idMod) {
        fetch(`http://localhost:3333/medidas/quantidadecurtida`)
            .then((response) => {
                response.json()
                    .then((resposta) => {
                        console.log(`Numero de curtidas chegou com sucesso`);
                        console.log(resposta.response);
                        const qtd_curtidaTotal = resposta.response

                        console.log(qtd_curtidaTotal)

                        let Curtidas = []
                        let IDMods = []

                        for (i = 0; i < qtd_curtidaTotal.length; i++) {
                            Curtidas.push(qtd_curtidaTotal[i].TotalCurtido)
                            IDMods.push(qtd_curtidaTotal[i].id)
                        }
                        console.log(Curtidas)
                        console.log(IDMods);

                        for (i = 0; i < qtd_curtidaTotal.length; i++) {
                            switch (IDMods[i]) {
                                case 1: {
                                    qtdCurtidasMod1.innerHTML = Curtidas[0]
                                    break;
                                } case 2: {
                                    qtdCurtidasMod2.innerHTML = Curtidas[1]
                                    break;
                                } case 3: {
                                    qtdCurtidasMod3.innerHTML = Curtidas[2]
                                    break;
                                } case 4: {
                                    qtdCurtidasMod4.innerHTML = Curtidas[3]
                                    break;
                                } case 5: {
                                    qtdCurtidasMod5.innerHTML = Curtidas[4]
                                    break;
                                }
                            }

                        }

                    })
            });
    }

</script>